<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Milton Motos e Pe√ßas ‚Äî Dashboard</title>
  <meta name="description" content="Sistema de pe√ßas ‚Äî Milton Motos e Pe√ßas" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      /* Cores da marca */
      --brand-red: #C62828;
      --brand-blue: #0D47A1;
      --brand-white: #ffffff;
      --bg: #0f172a;          /* slate-900 */
      --panel: #111827;       /* gray-900 */
      --panel-2: #0b1220;     /* fundo cards */
      --muted: #94a3b8;       /* slate-400 */
      --text: #e5e7eb;        /* gray-200 */
      --ok: #16a34a;
      --warn: #f59e0b;
      --danger: #ef4444;
      --ring: 0 0 0 3px rgba(13,71,161,.3);
      --shadow-lg: 0 10px 30px rgba(0,0,0,.35);
      --shadow-md: 0 6px 18px rgba(0,0,0,.25);
      --radius: 16px;
      --radius-sm: 12px;
      --radius-xl: 24px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 600px at 80% -10%, rgba(13,71,161,.25), transparent 40%),
                  radial-gradient(1000px 500px at -10% 20%, rgba(198,40,40,.25), transparent 45%),
                  var(--bg);
      color: var(--text);
      line-height:1.45;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    a{color:inherit;text-decoration:none}
    button{font:inherit}

    .app{
      display:grid;
      grid-template-rows: auto 1fr;
      min-height:100dvh;
    }

    /* Header */
    .header{
      position:sticky; top:0; z-index:50;
      background: linear-gradient(180deg, rgba(17,24,39,.9), rgba(17,24,39,.75));
      backdrop-filter: blur(8px);
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .header-inner{
      max-width:1200px; margin:0 auto;
      display:flex; align-items:center; gap:16px;
      padding:14px 20px;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
      font-weight:700; letter-spacing:.3px;
    }
    .logo{
      width:40px; height:40px; border-radius:12px; overflow:hidden;
      display:grid; place-items:center;
      background: linear-gradient(135deg, var(--brand-red), var(--brand-blue));
      box-shadow: var(--shadow-md);
    }
    .brand-title{font-size: clamp(16px, 2vw, 20px)}

    /* Nav */
    .nav{margin-left:auto; display:flex; align-items:center; gap:8px}
    .nav a{
      padding:10px 14px; border-radius:10px; color: var(--muted);
    }
    .nav a.active, .nav a:hover{color:var(--brand-white); background: rgba(255,255,255,.06)}

    .btn{cursor:pointer; border:0; border-radius:12px; padding:10px 14px; display:inline-flex; align-items:center; gap:8px}
    .btn-primary{background: linear-gradient(135deg, var(--brand-blue), #0b3c86); color:#fff; box-shadow: var(--shadow-md)}
    .btn-primary:hover{filter:brightness(1.05)}
    .btn-ghost{background: transparent; color: var(--text)}

    /* Layout */
    .container{max-width:1200px; margin:0 auto; padding:24px 20px}

    /* Hero */
    .hero{
      display:grid; grid-template-columns: 1.1fr .9fr; gap:20px; align-items:stretch;
    }
    @media (max-width:920px){.hero{grid-template-columns:1fr}}
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
      border:1px solid rgba(255,255,255,.06);
      box-shadow: var(--shadow-lg);
      border-radius: var(--radius);
      padding:18px;
    }
    .hero-left{display:grid; gap:18px}
    .welcome{
      background: radial-gradient(800px 300px at 20% -30%, rgba(13,71,161,.25), transparent 40%),
                  radial-gradient(600px 260px at 100% 120%, rgba(198,40,40,.22), transparent 55%),
                  linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.01));
    }
    .welcome h1{
      margin:8px 0 6px; font-size: clamp(20px, 3.4vw, 32px);
    }
    .welcome p{color: var(--muted); margin:0}

    /* KPIs */
    .kpis{display:grid; grid-template-columns: repeat(4,1fr); gap:14px}
    @media (max-width:920px){.kpis{grid-template-columns: repeat(2,1fr)}}
    @media (max-width:520px){.kpis{grid-template-columns: 1fr}}
    .kpi{
      padding:16px; border-radius:14px; background: var(--panel-2); border:1px solid rgba(255,255,255,.06);
    }
    .kpi .label{font-size:12px; color:var(--muted); text-transform:uppercase; letter-spacing:.08em}
    .kpi .value{font-size: clamp(20px, 3vw, 26px); font-weight:700; margin-top:6px}
    .kpi .trend{font-size:12px; margin-top:8px}
    .trend.up{color:var(--ok)}
    .trend.down{color:var(--danger)}

    /* Pe√ßas recentes */
    .grid{display:grid; grid-template-columns: 1fr; gap:16px}
    .toolbar{display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between}
    .search{
      display:flex; align-items:center; gap:10px; flex:1; min-width:220px;
      background: var(--panel-2); border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:10px 12px;
    }
    .search input{flex:1; background:transparent; border:0; outline:0; color:var(--text)}
    .table-wrap{overflow:auto; border-radius:14px; border:1px solid rgba(255,255,255,.06)}
    table{width:100%; border-collapse:collapse; min-width:760px; background: rgba(255,255,255,.02)}
    thead th{position:sticky; top:0; background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)); text-align:left; padding:12px; font-size:12px; text-transform:uppercase; letter-spacing:.08em; color:var(--muted)}
    tbody td{padding:14px 12px; border-top:1px solid rgba(255,255,255,.06)}
    tbody tr:hover{background: rgba(255,255,255,.03)}
    .badge{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; font-size:12px; border:1px solid rgba(255,255,255,.12)}
    .badge.blue{background:rgba(13,71,161,.12)}
    .badge.red{background:rgba(198,40,40,.12)}

    /* Footer */
    .footer{color:var(--muted); text-align:center; padding:26px 16px}

    /* Acessibilidade focos */
    :is(a,button,input){outline:none}
    :is(a,button,input):focus-visible{box-shadow: var(--ring)}
  </style>
</head>
<body>
<div class="app">
  <!-- Header -->
  <header class="header">
    <div class="header-inner">
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <!-- √≠cone simples em SVG -->
          <svg width="22" height="22" viewBox="0 0 24 24" fill="#fff" aria-hidden="true"><path d="M5 17h14l-1 3H6l-1-3Zm13.5-4c.83 0 1.5.67 1.5 1.5S19.33 16 18.5 16 17 15.33 17 14.5s.67-1.5 1.5-1.5ZM5.5 13c.83 0 1.5.67 1.5 1.5S6.33 16 5.5 16 4 15.33 4 14.5 4.67 13 5.5 13ZM3 6h9l3 3h6v5H3V6Z"/></svg>
        </div>
        <span class="brand-title">Milton Motos e Pe√ßas</span>
      </div>

      <nav class="nav" aria-label="Navega√ß√£o principal">
        <a href="#" class="active">Dashboard</a>
        <a href="produtos.html">Pe√ßas</a>
        <a href="vendas.html">Vendas</a>
        <a href="estoque.html">estoque</a>
        <a href="/cadastro-barcode.html">Cadastrar</a>
        <button class="btn btn-ghost" title="Sair" aria-label="Sair">
          <!-- √≠cone logout -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M16 13v-2H7V8l-5 4 5 4v-3h9Z"/><path d="M20 3h-8v2h8v14h-8v2h8a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2Z"/></svg>
          <button id="btnLogout">Sair</button>
        </button>
      </nav>
    </div>
  </header>

  <!-- Main -->
  <main class="container">
    <section class="hero">
      <div class="hero-left">
        <article class="card welcome">
          <h1>Bem-vinda, Isabel üëã</h1>
          <p>Este √© o seu painel do <strong>Milton Motos e Pe√ßas</strong>. Acompanhe estoque, vendas do m√™s e movimente suas pe√ßas com rapidez.</p>
        </article>

        <!-- KPIs -->
        <div class="kpis" role="region" aria-label="Indicadores do sistema">
          <div class="kpi" title="Quantidade total de pe√ßas em estoque">
            <div class="label">Pe√ßas em estoque</div>
            <div class="value" id="kpi-estoque">0</div>
            <div class="trend up">0% nesta semana</div>
          </div>
          <div class="kpi" title="Tempo m√©dio que a pe√ßa permanece em estoque">
            <div class="label">M√©dia de dias no estoque</div>
            <div class="value" id="kpi-media">0 dias</div>
            <div class="trend down">-0% vs. m√™s passado</div>
          </div>
          <div class="kpi" title="Vendas realizadas no m√™s atual">
            <div class="label">Vendas do m√™s</div>
            <div class="value" id="kpi-vendas">R$ 0</div>
            <div class="trend up">0 vendas hoje</div>
          </div>
          <div class="kpi" title="Avalia√ß√µes de clientes pendentes">
            <div class="label">Avalia√ß√µes pendentes</div>
            <div class="value" id="kpi-avaliacoes">0</div>
            <div class="trend">Revise at√© o fim do dia</div>
          </div>
        </div>
      </div>

      <!-- callout lateral -->
      <aside class="card" aria-label="Atalhos r√°pidos">
        <h2 style="margin:6px 0 14px; font-size:18px">A√ß√µes r√°pidas</h2>
        <div style="display:grid; gap:10px">
          <button class="btn btn-primary" id="btnAdd">‚ûï Adicionar pe√ßa</button>
          <button class="btn" style="background:linear-gradient(135deg, var(--brand-red), #a22323); color:#fff">‚¨ÜÔ∏è Registrar entrada</button>
          <button class="btn" style="background:linear-gradient(135deg, #0b3c86, #062e67); color:#fff">‚¨áÔ∏è Registrar sa√≠da</button>
        </div>
        <p style="color:var(--muted); margin-top:10px; font-size:14px">Dica: use a busca abaixo para localizar rapidamente uma pe√ßa por nome, tipo ou c√≥digo.</p>
      </aside>
    </section>

    <!-- Pe√ßas recentes -->
    <section class="grid" style="margin-top:20px">
      <div class="toolbar">
        <div class="search" role="search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M15.5 14h-.79l-.28-.27a6.471 6.471 0 0 0 1.57-4.23 6.5 6.5 0 1 0-6.5 6.5 6.471 6.471 0 0 0 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5Zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14Z"/></svg>
          <input id="busca" type="search" placeholder="Buscar pe√ßa por nome, tipo ou c√≥digo..." aria-label="Buscar pe√ßa">
        </div>
        <div style="display:flex; gap:8px">
          <button class="btn btn-primary" id="exportar">Exportar CSV</button>
          <button class="btn btn-ghost" id="atualizar">Atualizar</button>
        </div>
      </div>

      <div class="table-wrap" role="region" aria-label="Pe√ßas recentes">
        <table>
          <thead>
            <tr>
              <th>C√≥digo</th>
              <th>Nome</th>
              <th>Tipo</th>
              <th>Pre√ßo</th>
              <th>Estoque</th>
              <th>Status</th>
              <th style="text-align:right">A√ß√µes</th>
            </tr>
          </thead>
          <tbody id="tbody-pecas">
            <!-- Linhas de exemplo; ser√° trocado por dados reais da API -->
            <tr>
              <td>MM-0001</td>
              <td>Filtro de √ìleo Honda</td>
              <td><span class="badge blue">Motor</span></td>
              <td>R$ 29,90</td>
              <td>48</td>
              <td><span class="badge">Dispon√≠vel</span></td>
              <td style="text-align:right">
                <button class="btn btn-ghost" title="Editar">‚úèÔ∏è</button>
                <button class="btn btn-ghost" title="Excluir">üóëÔ∏è</button>
              </td>
            </tr>
            <tr>
              <td>MM-0123</td>
              <td>Pastilha de Freio Yamaha</td>
              <td><span class="badge red">Freio</span></td>
              <td>R$ 59,90</td>
              <td>12</td>
              <td><span class="badge">Baixo</span></td>
              <td style="text-align:right">
                <button class="btn btn-ghost" title="Editar">‚úèÔ∏è</button>
                <button class="btn btn-ghost" title="Excluir">üóëÔ∏è</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <footer class="footer">¬© <span id="ano"></span> Milton Motos e Pe√ßas ‚Äî Todos os direitos reservados.</footer>
</div>

<script>
  // Preencher ano automaticamente
  document.getElementById('ano').textContent = new Date().getFullYear();

  // Busca simples no front (ir√° filtrar linhas da tabela)
  const busca = document.getElementById('busca');
  const corpo = document.getElementById('tbody-pecas');
  busca.addEventListener('input', () => {
    const termo = busca.value.toLowerCase();
    for (const tr of corpo.querySelectorAll('tr')) {
      const texto = tr.textContent.toLowerCase();
      tr.style.display = texto.includes(termo) ? '' : 'none';
    }
  });

  // Bot√µes de exemplo para integrar com sua API real
  document.getElementById('atualizar').addEventListener('click', async () => {
    // Exemplo: buscar pe√ßas reais da sua API
    // const res = await fetch('http://localhost:5000/api/produtos');
    // const dados = await res.json();
    // renderizarPecas(dados);
    alert('Aqui voc√™ pode integrar com sua API: GET /api/produtos');
  });

  document.getElementById('exportar').addEventListener('click', () => {
    // Exportar tabela para CSV (simples)
    const linhas = [...document.querySelectorAll('table tr')].map(tr => [...tr.children].map(td => '"' + td.textContent.replace(/"/g,'""') + '"').join(','));
    const blob = new Blob([linhas.join('\n')], {type:'text/csv;charset=utf-8;'});
    const url = URL.createObjectURL(blob);
    const a = Object.assign(document.createElement('a'), {href:url, download:'pecas.csv'});
    document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  });

  document.getElementById('btnAdd').addEventListener('click', () => {
    alert('Abrir modal de "Adicionar pe√ßa" (voc√™ pode ligar no POST /api/produtos/cadastro)');
  });

  // Fun√ß√£o para renderizar pe√ßas vindas da API (exemplo de uso)
  function renderizarPecas(pecas = []){
    const frag = document.createDocumentFragment();
    pecas.forEach(p => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${p.codigo || ''}</td>
        <td>${p.nome || ''}</td>
        <td><span class="badge ${p.tipo === 'Freio' ? 'red' : 'blue'}">${p.tipo || ''}</span></td>
        <td>R$ ${(Number(p.preco)||0).toFixed(2).replace('.',',')}</td>
        <td>${p.estoque ?? ''}</td>
        <td><span class="badge">${(p.estoque ?? 0) <= 10 ? 'Baixo' : 'Dispon√≠vel'}</span></td>
        <td style="text-align:right">
          <button class="btn btn-ghost" title="Editar">‚úèÔ∏è</button>
          <button class="btn btn-ghost" title="Excluir">üóëÔ∏è</button>
        </td>`;
      frag.appendChild(tr);
    });
    corpo.replaceChildren(frag);
  }
</script>
</body>
</html>
